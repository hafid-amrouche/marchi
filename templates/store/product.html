{% extends 'base.html' %}
{% load static %}

{% block title %}
  {{ product.name.capitalize }}
{% endblock title %}

{% block link %}
  <link rel="stylesheet" href="{% static 'css/mine.css' %}">
{% endblock link %}


{% block content %}
  <section class="section-content padding-y bg">
    <div class="container">
    
    <!-- ============================ COMPONENT 1 ================================= -->
    <div class="card">
      <div class="row no-gutters">
        <aside class="col-md-6">
          <article class="gallery-wrap"> 
            <div class="img-big-wrap">
              <a href="{{ product.get_url }}"><img src="{{ product.image.url }}"></a>
            </div> <!-- img-big-wrap.// -->
            
          </article> <!-- gallery-wrap .end// -->
        </aside>
        <main class="col-md-6 border-left">
          <article class="content-body">
            <form action="{% url 'add_to_cart' 'add' product.pk %}" method="POST">
              {% csrf_token %}
              <h2 class="title">{{ product.name.capitalize }}</h2>
              
              <div class="mb-3"> 
                <var class="price h4">$ 
                  {% if product.has_variant %}
                    {{ product.price_from_variants }}
                  {% else %}
                    {{ product.price }}
                  {% endif %}
                  </var> 
              </div> 
              
              <p>{{ product.discription }}</p>
              {% if product.variations.all %} 
                <hr>
                {% for variation in product.variations.all %}
                  <div class="row">
                    <div class="item-option-select">
                      <h6>Choose {{ variation.category }}</h6>
                      {% if variation.has_images and variation.values.all.0.image.url %}
                        <div class="container">
                          <div class="product-thumbnails">
                            {% for value in variation.values.all %}
                              <label>
                                <input class="value-radio" type="radio" value="{{ value.name|lower }}" name="{{ variation.category|lower }}" {% if value == variation.values.all.0 %}checked{% endif %}>
                                <img src="{{ value.image.url }}" alt="{{ value.name }}">
                              </label>
                            {% endfor %}
                            </div>
                        </div>
                      {% else %}
                        <select class="form-select" aria-label="Default select example" name="{{ variation.category }}" required>
                          <option disabled>{{ variation.category }}</option>
                          {% for value in variation.values.all %}
                            <option class="dropdown-item" value="{{ value.name|lower }}" {% if value == variation.values.all.0 %}selected{% endif %}>{{ value.name|upper }}</option>
                          {% endfor %}
                        </select> 
                      {% endif %}
                    </div>
                  </div> <!-- row.// -->
                {% endfor %}
              {% endif %}   
              <hr>
              {% if product.out_of_stock == False %}
                <form action="{% url 'add_to_cart' 'add' product.id %}" method="POST">
                  {% csrf_token %}
                  {% for value in item.value.all %}
                    <input type="hidden" name="{{ value.variation.category }}" value="{{ value.name }}">
                  {% endfor %}
                  <button class="btn btn-primary" id="id="button-plus"">
                    <span class="text">
                      Add To Cart
                    </span>
                  </button>
                </form>
              {% else %}
                <h5 style="text-align:center">Out Of Stock</h5>
              {% endif %}
            </form> 
          </article> <!-- product-info-aside .// -->
        </main> <!-- col.// -->
      </div> <!-- row.// -->
    </div> <!-- card.// -->
    <!-- ============================ COMPONENT 1 END .// ================================= -->
    
    <br>
    
    <div class="row">
          <div class="col-md-9">
    
      <header class="section-heading">
        <h3>Customer Reviews </h3>  
        
      </header>
    
      <article class="box mb-3">
        <div class="icontext w-100">
          <img src="./images/avatars/avatar1.jpg" class="img-xs icon rounded-circle">
          <div class="text">
            <span class="date text-muted float-md-right">24.04.2020 </span>  
            <h6 class="mb-1">Mike John </h6>
            
          </div>
        </div> <!-- icontext.// -->
        <div class="mt-3">
          <p>
            Dummy comment Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip
          </p>	
        </div>
      </article>
    
      
    
      </div> <!-- col.// -->
    </div> <!-- row.// -->
    
    
    </div> <!-- container .//  -->
  </section>
{% endblock content %}


